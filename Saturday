package asg6;

import java.util.Scanner;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.Period;
import java.time.Year;
import java.time.chrono.ChronoLocalDate;
import java.time.temporal.ChronoUnit;
import java.util.Calendar;
import java.util.Date;
public class asg6 {

	public static void main(String[] args) {

		Calendar now = Calendar.getInstance();
		Calendar dob = Calendar.getInstance();
		HealthProfile patient = new HealthProfile(); //Creates object of class HP
		boolean keepGoing = false; // User input Validation
		Date dateOfBirth = null;
		
		@SuppressWarnings("resource")
		Scanner input = new Scanner(System.in);
		System.out.println("What is your first name?");
		String firstName = input.nextLine();
		patient.setFirstName(firstName);
		
		System.out.println("What is your last name?");
		String lastName = input.nextLine();
		patient.setLastName(lastName);
		
		//Gender
		do // should i just do regular while? 
		{
			System.out.println("What is your gender (M/F)"); // only 2 lol
			String gender = input.nextLine();
			switch (gender) //better way to control for case? i tried doing if then and try catch. couldnt do =ignorecase. 
			{	
		        case "M":  gender = "Male"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "F":  gender = "Female"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "Male":  gender = "Male"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "Female":  gender = "Female"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "m":  gender = "Male"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "f":  gender = "Female"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "male":  gender = "Male"; patient.setGender(gender);keepGoing = true;
		        break;
		        case "female":  gender = "Female"; patient.setGender(gender);keepGoing = true;
		        break;
		        default: System.out.println("Invalid gender"); keepGoing = false;
		        break;
			}
		}while(!keepGoing);
		//Birth date
	    do
	    {	
		    System.out.println("Enter Date of Birth (MM/DD/YYYY): "); //format? DD/MM/YY? MM/DD/YY?? YYYY?
		    try //user input validation
		    {
		    	dateOfBirth = new SimpleDateFormat("mmDDyyyy").parse(input.nextLine().replaceAll("/", ""));
		        keepGoing = true; // do while cont
			    patient.setDateOfBirth(dateOfBirth.toString());
			    
		    } catch (Exception e) {
		        System.out.println("invalid");  
		        keepGoing = false;
		      
		    }
	    }while(!keepGoing);
	    
	    LocalDate today = LocalDate.now();           //getyear() Method Returns last 2 Digits of year
	    LocalDate birthday = LocalDate.of(dateOfBirth.getYear() + 1900, dateOfBirth.getMonth() + 1, dateOfBirth.getDay());
	    
	    long age = ChronoUnit.YEARS.between(birthday, today);
	    patient.setAge(age);
	       
	    
		//Height
	    System.out.println("what is your height in inches: "); //set height
		int height = input.nextInt();
		do
		{
			if(height > 107 )
			{
				System.out.println("Invalid input");
				keepGoing = false;
				System.out.println("what is your height in inches: "); //set height
				height = input.nextInt();
			}
			else if(height < 0)
			{
				System.out.println("invalid input");
				keepGoing = false;
				System.out.println("what is your height in inches: "); //set height
				height = input.nextInt();
			}
			else
			{
				patient.setHeight(height);
				keepGoing = true;
			}
		}while(!keepGoing);
		
		
		//Weight
		System.out.println("what is your weight in lbs: ");
		int weight = input.nextInt();
		do
		{
			if(weight > 1400 )
			{
				System.out.println("Invalid input");
				keepGoing = false;
				System.out.println("what is your weight in lbs: ");
				weight = input.nextInt();
			}
			else if(weight < 0)
			{
				System.out.println("invalid input");
				keepGoing = false;
				System.out.println("what is your weight in lbs: ");
				weight = input.nextInt();
			}
			else
			{
				patient.setWeight(weight);
				keepGoing = true;
			}
		}while(!keepGoing);
		
		double bodyMassIndex = (patient.getWeight()*703)/(patient.getHeight()* patient.getHeight());
		patient.setBodyMassIndex(bodyMassIndex);
		long maxHeartRate = (220 - patient.getAge());
		patient.setMaxHeartRate(maxHeartRate);
		int targetHeartRate2;
		targetHeartRate2 = (int) (maxHeartRate * .85);
		patient.setTargetHeartRate2(targetHeartRate2);
		int targetHeartRate1;
		targetHeartRate1 = (int) (maxHeartRate * .5);
		patient.setTargetHeartRate1(targetHeartRate1);
		patient.output();
		patient.bodyMassAssesment();
		
	}// Close Main
}//Close Asg6 

class HealthProfile {
	
	private String firstName;
	private String lastName;
	private String gender; //only 2
	private String dateOfBirth; //3 atts
	private int height;  // in inches
	private int weight;	 // in lbs
	private long age;
	private double bodyMassIndex;
	private long maxHeartRate;
	private int targetHeartRate1;
	private int targetHeartRate2;
	
	public int getTargetHeartRate1() 
	{
		return targetHeartRate1;
	}
	public void setTargetHeartRate1(int targetHeartRate1) 
	{
		this.targetHeartRate1 = targetHeartRate1;
	}
	public int getTargetHeartRate2() 
	{
		return targetHeartRate2;
	}
	public void setTargetHeartRate2(int targetHeartRate2) 
	{
		this.targetHeartRate2 = targetHeartRate2;
	}
	public String getFirstName() 
	{
		return firstName;
	}
	public void setFirstName(String firstName) 
	{
		this.firstName = firstName;
	}
	public String getLastName()
	{
		return lastName;
	}
	public void setLastName(String lastName) 
	{
		this.lastName = lastName;
	}
	public String getGender() 
	{
		return gender;
	}
	public void setGender(String gender) 
	{
		this.gender = gender;
	}
	public String getDateOfBirth()
	{
		return dateOfBirth;
	}
	public void setDateOfBirth(String dateOfBirth) 
	{
		this.dateOfBirth = dateOfBirth;
	}
	public int getHeight() 
	{
		return height;
	}
	public void setHeight(int height) 
	{
		this.height = height;
	}
	public int getWeight()
	{
		return weight;
	}
	public void setWeight(int weight) 
	{
		this.weight = weight;
	}
	public long getAge() 
	{
		return age;
	}
	public void setAge(long age)
	{
		this.age = age;
	}
	public double getBodyMassIndex()
	{
		return bodyMassIndex;
	}
	public void setBodyMassIndex(double bodyMassIndex) 
	{
		this.bodyMassIndex = bodyMassIndex;
	}
	public long getMaxHeartRate() 
	{
		return maxHeartRate;
	}
	public void setMaxHeartRate(long maxHeartRate) 
	{
		this.maxHeartRate = maxHeartRate;
	}
	public void bodyMassAssesment()
	{
		if (getBodyMassIndex() < 18.5)
		{
			System.out.println("BMI Assesment: Underweight");
		}
		else if (getBodyMassIndex() >=18.5 && getBodyMassIndex() <= 24.9 )
		{	
			System.out.println("BMI Assesment: Normal");
		}
		else if (getBodyMassIndex()>=25 && getBodyMassIndex() <=29.9)
		{
			System.out.println("BMI Assesment: Overweight");
		}
		else if (getBodyMassIndex() >= 30)
		{
			System.out.println("BMI Assesment: Obese");
		}
		else 
		{
			System.out.println("system error");
			System.exit(0);
		}		
	}
	public void output()
	{
		System.out.println("\n");
		System.out.printf("Patient: %s %s - %s \n", getFirstName(), getLastName(),getGender());
		System.out.printf("Age: %s \n", getAge() + " years old");
		System.out.printf("Height: %s", getHeight() + " inches tall\n");
		System.out.printf("Weight: %s", getWeight() + "lbs \n");
		System.out.printf("Date Of Birth: %s", getDateOfBirth());
		System.out.println(" ");
		System.out.printf("Max Heart Rate: %s \n", getMaxHeartRate());
		System.out.printf("Target Heart Rate: %s - %s \n", getTargetHeartRate1() + " BPM", getTargetHeartRate2() + " BPM");
		System.out.printf("BMI: %s ", getBodyMassIndex());
		System.out.println(" ");
	}//close output
};//close class Health Profile
			 	
